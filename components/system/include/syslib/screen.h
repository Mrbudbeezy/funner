#ifndef SYSLIB_SCREEN_HEADER
#define SYSLIB_SCREEN_HEADER

#include <cstddef>

namespace syslib
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Цвет
///////////////////////////////////////////////////////////////////////////////////////////////////
struct Color3f
{
  float red, green, blue;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Дескриптор видео-режима
///////////////////////////////////////////////////////////////////////////////////////////////////
struct ScreenModeDesc
{
  size_t width;        //ширина фрейм-буфера
  size_t height;       //высота фрейм-буфера
  size_t color_bits;   //количество бит на цвет
  size_t refresh_rate; //частота обновления монитора (0-default)
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Экран
///////////////////////////////////////////////////////////////////////////////////////////////////
class Screen
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    Screen (size_t screen_index);    
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Индекс экрана
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t Index () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Name () const;
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Размеры экрана
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t Width  () const;
    size_t Height () const;
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Количество бит на пиксель
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t ColorBits () const;
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Частота обновления
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t RefreshRate () const;
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение списка видео-режимов
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t ModesCount () const;
    void   GetMode    (size_t mode_index, ScreenModeDesc& mode_desc) const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка текущего видео-режима
///////////////////////////////////////////////////////////////////////////////////////////////////
    void SetCurrentMode     (const ScreenModeDesc&);
    void GetCurrentMode     (ScreenModeDesc&) const;
    void GetDefaultMode     (ScreenModeDesc&) const;
    void RestoreDefaultMode ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Управление гамма-коррекцией
///////////////////////////////////////////////////////////////////////////////////////////////////
    void SetGammaRamp (const Color3f table [256]);
    void GetGammaRamp (Color3f table [256]) const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Swap (Screen&);    
  
  private:
    size_t screen_index;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
void swap (Screen&, Screen&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Менеджер экранов
///////////////////////////////////////////////////////////////////////////////////////////////////
class ScreenManager
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Перечисление экранов
///////////////////////////////////////////////////////////////////////////////////////////////////
    static size_t         ScreensCount ();
    static syslib::Screen Screen       (size_t index);    
};

}

#endif
