#ifndef SCENE_GRAPH_CONTROLLERS_ACCELERATION_EVALUATORS_HEADER
#define SCENE_GRAPH_CONTROLLERS_ACCELERATION_EVALUATORS_HEADER

#include <sg/controller.h>

namespace scene_graph
{

namespace controllers
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Рассчет ускорения с использованием ускорения, замедления, максимальной скорости
///////////////////////////////////////////////////////////////////////////////////////////////////
class LinearAccelerationEvaluator
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор / копирование
///////////////////////////////////////////////////////////////////////////////////////////////////
    LinearAccelerationEvaluator  ();
    LinearAccelerationEvaluator  (const LinearAccelerationEvaluator&);
    ~LinearAccelerationEvaluator ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Рассчет ускорения
///////////////////////////////////////////////////////////////////////////////////////////////////
    const math::vec3f& operator () (const math::vec3f& current_speed, const math::vec3f& distance, float dt) const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка/получение ускорения разгона
///////////////////////////////////////////////////////////////////////////////////////////////////
    void  SetAcceleration (float acceleration);
    float Acceleration    () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка/получение ускорения замедления
///////////////////////////////////////////////////////////////////////////////////////////////////
    void  SetDeceleration (float deceleration);
    float Deceleration    () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка/получение максимальной скорости
///////////////////////////////////////////////////////////////////////////////////////////////////
    void  SetMaxSpeed (float max_speed);
    float MaxSpeed    () const;

  private:
    LinearAccelerationEvaluator& operator = (const LinearAccelerationEvaluator&); //no impl

  private:
    struct Impl;
    Impl* impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Рассчет ускорения с использованием фиксированного времени достижения цели
///////////////////////////////////////////////////////////////////////////////////////////////////
class FixedTimeArrivalAccelerationEvaluator
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор / копирование
///////////////////////////////////////////////////////////////////////////////////////////////////
    FixedTimeArrivalAccelerationEvaluator  ();
    FixedTimeArrivalAccelerationEvaluator  (const FixedTimeArrivalAccelerationEvaluator&);
    ~FixedTimeArrivalAccelerationEvaluator ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Рассчет ускорения
///////////////////////////////////////////////////////////////////////////////////////////////////
    const math::vec3f& operator () (const math::vec3f& current_speed, const math::vec3f& distance, float dt) const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка/получение времени прибытия в целевую точку
///////////////////////////////////////////////////////////////////////////////////////////////////
    void  SetArrivalTime (float time);
    float ArrivalTime    () const;

  private:
    FixedTimeArrivalAccelerationEvaluator& operator = (const FixedTimeArrivalAccelerationEvaluator&); //no impl

  private:
    struct Impl;
    Impl* impl;
};

}

}

#endif
