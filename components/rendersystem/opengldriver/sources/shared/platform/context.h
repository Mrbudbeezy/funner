#ifndef RENDER_GL_DRIVER_CONTEXT_HEADER
#define RENDER_GL_DRIVER_CONTEXT_HEADER

#include <gl/glew.h>
#include <stl/auto_ptr.h>

namespace render
{

namespace low_level
{

namespace opengl
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Контекст OpenGL
///////////////////////////////////////////////////////////////////////////////////////////////////
class Context
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    Context  (ISwapChain*);
    ~Context ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Управление транзакцией работы контекста
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Lock     ();
    void Unlock   ();
    bool IsLocked () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка цепочки обмена
///////////////////////////////////////////////////////////////////////////////////////////////////
    void        SetSwapChain (ISwapChain*);
    ISwapChain* GetSwapChain () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение списка расширений, зависящих от текущей цепочки обмена
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* GetSwapChainExtensionString () const;

  private:
    Context (const Context&); //no impl
    Context& operator = (const Context&); //no impl

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение контекста GLEW (имя функции выбрано исходя из требований GLEW)
///////////////////////////////////////////////////////////////////////////////////////////////////
const GLEWContext* glewGetContext ();

}

}

}

#endif
