#ifndef MEDIALIB_PHYSICS_COMPOUND_HEADER
#define MEDIALIB_PHYSICS_COMPOUND_HEADER

#include <cstddef>

namespace media
{

namespace physics
{

class Shape;

namespace shapes
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Описание тела в виде набора тел
///////////////////////////////////////////////////////////////////////////////////////////////////
class Compound
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструкторы / деструктор / присваивание
///////////////////////////////////////////////////////////////////////////////////////////////////
    Compound  ();
    Compound  (const Compound&);
    ~Compound ();

    Compound& operator = (const Compound&);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Идентификатор
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t Id () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Копирование
///////////////////////////////////////////////////////////////////////////////////////////////////
    Compound Clone () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Добавление / удаление тел
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t Size     () const;
    size_t Capacity () const;
    void   Reserve  (size_t size);

    void Attach    (const Shape& shape);
    void Detach    (const Shape& shape);
    void DetachAll ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение тел
///////////////////////////////////////////////////////////////////////////////////////////////////
    const media::physics::Shape& Shape (size_t index) const;
          media::physics::Shape& Shape (size_t index);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Swap (Compound&);

  private:
    struct Impl;
    Impl* impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
void swap (Compound&, Compound&);

}

}

}

#endif
