#ifndef MEDIA_RMS_MANAGER_HEADER
#define MEDIA_RMS_MANAGER_HEADER

#include <media/rms/server.h>

namespace media
{

namespace rms
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Менеджер управления ресурсами
///////////////////////////////////////////////////////////////////////////////////////////////////
class ResourceManager
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструкторы / деструктор / присваивание
///////////////////////////////////////////////////////////////////////////////////////////////////
    ResourceManager  ();
    ResourceManager  (const ResourceManager&);
    ~ResourceManager ();

    ResourceManager& operator = (const ResourceManager&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Связывание с серверами ресурсов
///////////////////////////////////////////////////////////////////////////////////////////////////
    Binding CreateBinding (const Group& group);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Управление серверами ресурсов
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Attach (Server&);
    void Detach (Server&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Сброс не используемых ресурсов
///////////////////////////////////////////////////////////////////////////////////////////////////
    void FlushUnusedResources ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Swap (ResourceManager&);

  private:
    struct Impl;
    Impl* impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
void swap (ResourceManager&, ResourceManager&);

}

}

#endif
