blend "no_blend"
{
  disabled  
}

blend "translucent"
{
  alpha_to_coverage
  
  color add src_alpha src_one_minus_alpha
  alpha mul src_alpha src_one_minus_alpha
  mask  rgba //default 'rgba'
}

depthstencil "solid"
{
  depthtest     true
  depthwrite    true
  depthcompare  less
  stenciltest   true
  stencilread   0xf
  stencilwrite  0xf  
  
  front
  {
    compare     less
    stencilfail keep
    depthfail   keep
    stencilpass keep
  }
  
  back
  {
  }
}

rasterizer "default"
{
  frontclockwise
  
  fill solid
  cull back
  depthbias 0
  scissor false
  multisample false
  lineantialiasing true
}

program "phong" "glsl"
{
  shader "phong.vert" //add compile options
  shader  "phong.frag"
}

pass "solids"
{  
  tags         solid
  clear        rendertarget depth stencil
  rasterizer   "default"
  blend        "no_blend"
  depthstencil "solid"
  program      "phong"
  
  params "lighting" //????
  params "material" //??????
  params "transformations"
  params "fog"
}

pass "transparents"
{
  tags blend
    //...
}

frame "light_shadow"
{
  depthstenciltarget "shadow_map"
  colortarget        null

  tags "shadow"

  pass "z-only"
}

frame "light"
{
  depthstenciltarget "main_depth_stencil1"
  colortarget        "main_color" 

  tags "light"
  
  pass "solids"
  pass "transparents"  
}

frame "default"
{
  subpasses "shadow"
  
  rendertargets
  {
    depthstencil "main_depth_stencil"
    color        null
  }

  pass "z-only"

  rendertargets
  {
    depthstencil "main_depth_stencil" 
    color        "main_color1"
    color        "main_color2"
  }
    
  subpasses "light"

  pass "dof"

  pass "helpers"  
}
