///////////////////////////////////////////////////////////////////////////////////////////////////
///Материал
///////////////////////////////////////////////////////////////////////////////////////////////////
class MaterialImpl: public Object, public CacheSource
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    MaterialImpl  (const TextureManagerPtr&);
    ~MaterialImpl ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Идентификатор материала
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Id    ();
    void        SetId (const char* id);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Свойства материала
///////////////////////////////////////////////////////////////////////////////////////////////////
    const common::PropertyMap& Properties ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение текстуры
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t                   TexturesCount ();
    TexturePtr               Texture       (size_t index); //может вернуть 0 в случае отсутствия статической текстуры
    const char*              TextureName   (size_t index);
    LowLevelSamplerStatePtr  Sampler       (size_t index);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление материала
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Update (const media::rfx::Material&);

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
