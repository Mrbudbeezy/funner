///////////////////////////////////////////////////////////////////////////////////////////////////
///Текстура
///////////////////////////////////////////////////////////////////////////////////////////////////
class TextureImpl: public Object
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор / присваивание
///////////////////////////////////////////////////////////////////////////////////////////////////
    TextureImpl  (const DeviceManagerPtr& manager,
                  TextureDimension        dimension,
                  unsigned int            width,
                  unsigned int            height,
                  unsigned int            depth,
                  PixelFormat             format,
                  bool                    generate_mipmaps,
                  const char*             name = "");
    TextureImpl  (const DeviceManagerPtr&       manager,
                  const low_level::TextureDesc& desc,
                  const char*                   name = "");                  
    TextureImpl  (const DeviceManagerPtr&       manager,
                  TextureDimension              dimension,
                  const media::CompressedImage& image,
                  const char*                   name = "");
    ~TextureImpl ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя текстуры
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Name    ();
    void        SetName (const char* id);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Низкоуровневый объект текстуры
///////////////////////////////////////////////////////////////////////////////////////////////////
    LowLevelTexturePtr DeviceTexture ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Размерность
///////////////////////////////////////////////////////////////////////////////////////////////////
    TextureDimension Dimension ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Формат и размеры
///////////////////////////////////////////////////////////////////////////////////////////////////
    PixelFormat  Format ();
    unsigned int Width  ();
    unsigned int Height ();
    unsigned int Depth  ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение цели рендеринга
///////////////////////////////////////////////////////////////////////////////////////////////////
    RenderTargetPtr RenderTarget (unsigned int layer, unsigned int mip_level);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление образа
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Update (const media::Image&);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Захват образа
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Capture (unsigned int layer, unsigned int mip_level, media::Image& image);
    void Capture (unsigned int mip_level, media::Image& image);
    
  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
