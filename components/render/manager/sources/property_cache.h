///////////////////////////////////////////////////////////////////////////////////////////////////
///Кэш свойств
///////////////////////////////////////////////////////////////////////////////////////////////////
class PropertyCache: public xtl::noncopyable
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    PropertyCache  (const DeviceManagerPtr&);
    ~PropertyCache ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение объекта параметров
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Convert (const common::PropertyMap& source_map, LowLevelBufferPtr& result_buffer, ProgramParametersLayoutPtr& result_layout);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Сброс кэша
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Flush ();

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
