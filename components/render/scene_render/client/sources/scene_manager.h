//forward declarations
struct SceneUpdateList;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Менеджер сцен
///////////////////////////////////////////////////////////////////////////////////////////////////
class SceneManager: public xtl::noncopyable
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    SceneManager  ();
    ~SceneManager ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение сцены
///////////////////////////////////////////////////////////////////////////////////////////////////
    ScenePtr GetScene (scene_graph::Scene&, Connection& connection);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Синхронизация
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Update ();

  private:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Список обновлений
///////////////////////////////////////////////////////////////////////////////////////////////////
    SceneUpdateList& UpdateList ();

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
