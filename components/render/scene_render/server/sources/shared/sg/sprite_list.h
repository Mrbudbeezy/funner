#ifndef RENDER_SCENE_SERVER_SPRITE_LIST_SHARED_HEADER
#define RENDER_SCENE_SERVER_SPRITE_LIST_SHARED_HEADER

#include <shared/sg/visual_model.h>

namespace render
{

namespace scene
{

namespace server
{

using interchange::SpriteMode;
using interchange::PrimitiveUsage;
using interchange::SpriteDesc;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Список спрайтов
///////////////////////////////////////////////////////////////////////////////////////////////////
class SpriteList: public VisualModel
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструкторы / деструктор / присваивание
///////////////////////////////////////////////////////////////////////////////////////////////////
    SpriteList  (RenderManager& render_manager);
    ~SpriteList ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Основные параметры
///////////////////////////////////////////////////////////////////////////////////////////////////
    void               SetParams (SpriteMode mode, PrimitiveUsage usage, const math::vec3f& up);
    SpriteMode         Mode      () const;
    PrimitiveUsage     Usage     () const;
    const math::vec3f& OrtUp     () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя материала
///////////////////////////////////////////////////////////////////////////////////////////////////
    void        SetMaterial (const char* name);
    const char* Material    () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя пакета
///////////////////////////////////////////////////////////////////////////////////////////////////
    void        SetBatch (const char* name);
    const char* Batch    () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Количество спрайтов / размер буфера
///////////////////////////////////////////////////////////////////////////////////////////////////
    size_t Size     () const;
    size_t Capacity () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Изменение размера списка спрайтов / резервирование места для хранения спрайтов
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Resize  (size_t count);
    void Reserve (size_t count);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление дескрипторов спрайтов
///////////////////////////////////////////////////////////////////////////////////////////////////
    void SetDescs (size_t first, size_t count, const SpriteDesc* descs);

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};

}

}

}

#endif
