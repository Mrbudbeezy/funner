#ifndef RENDER_SCENE_SERVER_SHARED_HEADER
#define RENDER_SCENE_SERVER_SHARED_HEADER

#include <stl/auto_ptr.h>

#include <xtl/trackable.h>

#include <common/log.h>

#include <render/manager.h>

namespace render
{

namespace scene
{

namespace server
{

//forward declarations
class MaterialManager;
class ResourceManager;
class SceneManager;
class ScreenManager;
class WindowManager;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Реализация сервера рендеринга
///////////////////////////////////////////////////////////////////////////////////////////////////
class ServerImpl: public xtl::noncopyable, public xtl::trackable
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    ServerImpl  (const char* name);
    ~ServerImpl ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Поток отладочного протоколирования
///////////////////////////////////////////////////////////////////////////////////////////////////
    common::Log& Log ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Менеджеры
///////////////////////////////////////////////////////////////////////////////////////////////////
    server::MaterialManager& MaterialManager ();
    server::ResourceManager& ResourceManager ();
    manager::RenderManager&  RenderManager   ();
    server::SceneManager&    SceneManager    ();
    server::ScreenManager&   ScreenManager   ();
    server::WindowManager&   WindowManager   ();

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};

}

}

}

#endif
