///////////////////////////////////////////////////////////////////////////////////////////////////
///“ехника рендеринга: отрисовка изображени€ из каждого источника и сложение полученных изображений
///////////////////////////////////////////////////////////////////////////////////////////////////
class ForEachLightTechnique: public Technique
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
/// онструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    ForEachLightTechnique  (RenderManager& manager, common::ParseNode& node);
    ~ForEachLightTechnique ();    
    
  private:
///////////////////////////////////////////////////////////////////////////////////////////////////
///ќбновление кадра
///////////////////////////////////////////////////////////////////////////////////////////////////
    void UpdateFrameCore (Scene& scene, Frame& frame, ITraverseResultCache& traverse_result_cache);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///ќбновление свойств
///////////////////////////////////////////////////////////////////////////////////////////////////
    void ResetPropertiesCore  ();
    void UpdatePropertiesCore (const common::PropertyMap&);

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
