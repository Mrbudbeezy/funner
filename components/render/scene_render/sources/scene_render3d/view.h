///////////////////////////////////////////////////////////////////////////////////////////////////
///Область вывода
///////////////////////////////////////////////////////////////////////////////////////////////////
class View: public xtl::noncopyable, public xtl::reference_counter, public ISceneRender
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    View  (RenderManager&, const char* technique);
    ~View ();    

///////////////////////////////////////////////////////////////////////////////////////////////////
///Кадр
///////////////////////////////////////////////////////////////////////////////////////////////////
    render::Frame& Frame ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление камеры
///////////////////////////////////////////////////////////////////////////////////////////////////
    void UpdateCamera (scene_graph::Camera* camera);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление свойств ренедринга
///////////////////////////////////////////////////////////////////////////////////////////////////
    void UpdateProperties (const common::PropertyMap&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обновление содержимого кадра
///////////////////////////////////////////////////////////////////////////////////////////////////
    void UpdateFrame ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Подсчёт ссылок
///////////////////////////////////////////////////////////////////////////////////////////////////
    void AddRef  ();
    void Release ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Имя техники рендеринга
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* TechniqueName ();
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Управление техниками рендеринга
///////////////////////////////////////////////////////////////////////////////////////////////////
    void AddTechnique        (const TechniquePtr& technique);
    void RemoveAllTechniques ();

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
