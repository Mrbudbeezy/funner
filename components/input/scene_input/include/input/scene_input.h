#ifndef INPUT_SYSTEM_SCENE_INPUT_HEADER
#define INPUT_SYSTEM_SCENE_INPUT_HEADER

#include <sg/input.h>
#include <sg/screen.h>

namespace input
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Система координат ввода
///////////////////////////////////////////////////////////////////////////////////////////////////
enum InputTransformSpace
{
  InputTransformSpace_Screen, //система кооринат экрана
  InputTransformSpace_Camera, //система координат камеры
  
  InputTransformSpace_Default = InputTransformSpace_Camera
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Менеджер ввода сцены
///////////////////////////////////////////////////////////////////////////////////////////////////
class SceneInputManager
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструкторы / деструктор / присваивание
///////////////////////////////////////////////////////////////////////////////////////////////////
    SceneInputManager  ();
    SceneInputManager  (const SceneInputManager&);
    ~SceneInputManager ();
    
    SceneInputManager& operator = (const SceneInputManager&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Присоединенный экран
///////////////////////////////////////////////////////////////////////////////////////////////////
          scene_graph::Screen* Screen    ();
    const scene_graph::Screen* Screen    () const;
          void                 SetScreen (scene_graph::Screen* screen);
          
///////////////////////////////////////////////////////////////////////////////////////////////////
///Размер тача
///////////////////////////////////////////////////////////////////////////////////////////////////
    void                SetTouchSize   (float size, InputTransformSpace = InputTransformSpace_Default);
    float               TouchSize      () const;
    InputTransformSpace TouchSizeSpace () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обработка события ввода
///////////////////////////////////////////////////////////////////////////////////////////////////
    void ProcessEvent (const char* event);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Сброс состояния обработки ввода
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Reset ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Swap (SceneInputManager&);

  private:
    struct Impl;
    Impl* impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
void swap (SceneInputManager&, SceneInputManager&);

}

#endif
