#ifndef TOOLS_UI_MAIN_WINDOW_HEADER
#define TOOLS_UI_MAIN_WINDOW_HEADER

#include <stl/auto_ptr.h>
#include <xtl/functional_fwd>

namespace tools
{

namespace ui
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Главное окно
///////////////////////////////////////////////////////////////////////////////////////////////////
class MainWindow
{
  public:
    typedef xtl::function<void (const char* message)> LogFunction;
  
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструкторы / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    MainWindow  ();
    MainWindow  (const char* application_server, const char* window_system_profile);
    ~MainWindow ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Профиль главного окна / имя сервера приложения
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Profile           () const;
    const char* ApplicationServer () const;

///////////////////////////////////////////////////////////////////////////////////////////////////
///Выполнение команды на стороне оконной системы
///////////////////////////////////////////////////////////////////////////////////////////////////
    void ExecuteCommand (const char* command);
    void ExecuteFile    (const char* file_name);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Установка функции протоколирования
///////////////////////////////////////////////////////////////////////////////////////////////////
    void               SetLogHandler (const LogFunction& log);
    const LogFunction& LogHandler    () const; 

///////////////////////////////////////////////////////////////////////////////////////////////////
///Перезапуск
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Restart ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
    void Swap (MainWindow&);

  private:
    MainWindow (const MainWindow&); //no impl
    MainWindow& operator = (const MainWindow&); //no impl

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///Обмен
///////////////////////////////////////////////////////////////////////////////////////////////////
void swap (MainWindow&, MainWindow&);

}

}

#endif
