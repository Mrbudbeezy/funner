///////////////////////////////////////////////////////////////////////////////////////////////////
///¬арианты стыковки формы
///////////////////////////////////////////////////////////////////////////////////////////////////
enum FormDockState
{
  FormDockState_Bottom,          //стыковка снизу
  FormDockState_BottomAutoHide,  //стыковка снизу с автоматическим исчезанием формы
  FormDockState_Left,            //стыковка слева
  FormDockState_LeftAutoHide,    //стыковка слева с автоматическим исчезанием формы
  FormDockState_Right,           //стыковка справа
  FormDockState_RightAutoHide,   //стыковка справа с автоматическим исчезанием формы
  FormDockState_Top,             //стыковка сверху
  FormDockState_TopAutoHide,     //стыковка сверху с автоматическим исчезанием формы
  FormDockState_Document,        //стыковка по центру
  FormDockState_Float,           //без стыковки
  FormDockState_Hidden,          //форма спр€тана
  
  FormDockState_Default = FormDockState_Document,

  FormDockState_Num
};

///////////////////////////////////////////////////////////////////////////////////////////////////
///ƒочерн€€ форма
///////////////////////////////////////////////////////////////////////////////////////////////////
class ChildForm: public Form
{
  public:
    typedef xtl::intrusive_ptr<ChildForm> Pointer;

///////////////////////////////////////////////////////////////////////////////////////////////////
///ƒеструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    ~ChildForm ();        

///////////////////////////////////////////////////////////////////////////////////////////////////
///—оздание формы
///////////////////////////////////////////////////////////////////////////////////////////////////
    static Pointer Create (windows_forms::WindowSystem& window_system, const char* init_string, FormDockState dock_state);
    static Pointer Create (windows_forms::WindowSystem& window_system, System::Windows::Forms::Control^ child, FormDockState dock_state);

///////////////////////////////////////////////////////////////////////////////////////////////////
///–ежим стыковки формы
///////////////////////////////////////////////////////////////////////////////////////////////////
    void          SetDockState (FormDockState);
    FormDockState DockState    ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///–егистраци€ шлюзов
///////////////////////////////////////////////////////////////////////////////////////////////////
    static void RegisterInvokers (script::Environment& environment,
                                  const char*          base_library_name,
                                  const char*          library_name,
                                  const char*          dock_state_library_name);

  private:
///////////////////////////////////////////////////////////////////////////////////////////////////
/// онструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    ChildForm (windows_forms::WindowSystem& window_system, const char* init_string, FormDockState dock_state);
    ChildForm (windows_forms::WindowSystem& window_system, System::Windows::Forms::Control^ child, FormDockState dock_state);

  private:
    struct Impl;
    stl::auto_ptr<Impl> impl;
};
