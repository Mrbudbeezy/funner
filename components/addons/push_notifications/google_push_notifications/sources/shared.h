#ifndef PUSH_NOTIFICATIONS_GOOGLE_SHARED_HEADER
#define PUSH_NOTIFICATIONS_GOOGLE_SHARED_HEADER

#include <xtl/bind.h>
#include <xtl/common_exceptions.h>
#include <xtl/function.h>
#include <xtl/signal.h>

#include <common/action_queue.h>
#include <common/component.h>
#include <common/log.h>
#include <common/property_map.h>
#include <common/singleton.h>
#include <common/strlib.h>

#include <syslib/platform/android.h>

#include <push_notifications/push_notifications_center.h>

namespace push_notifications
{

namespace google_push_notifications
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Push notifications processing center
///////////////////////////////////////////////////////////////////////////////////////////////////
class PushNotificationsCenterImpl : public IPushNotificationsCenter
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Constructor / destructor
///////////////////////////////////////////////////////////////////////////////////////////////////
    PushNotificationsCenterImpl  ();
    ~PushNotificationsCenterImpl ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Description
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Description ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Registration for push notifications
///////////////////////////////////////////////////////////////////////////////////////////////////
    void RegisterForNotifications   (const PushNotificationsCenter::RegisterCallback& callback, const common::PropertyMap& properties);
    void UnregisterForNotifications ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Registration for new push notifications
///////////////////////////////////////////////////////////////////////////////////////////////////
    xtl::connection RegisterNotificationsHandler (const PushNotificationsCenter::NotificationsHandler&);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Initialization of java-bindings
///////////////////////////////////////////////////////////////////////////////////////////////////
    static void InitJavaBindings (JNIEnv* env);
};

}

}

#endif
