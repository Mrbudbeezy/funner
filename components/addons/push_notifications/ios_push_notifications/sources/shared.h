#ifndef PUSH_NOTIFICATIONS_IOS_SHARED_HEADER
#define PUSH_NOTIFICATIONS_IOS_SHARED_HEADER

#include <stl/vector>

#include <xtl/bind.h>
#include <xtl/common_exceptions.h>
#include <xtl/function.h>
#include <xtl/signal.h>

#include <common/component.h>
#include <common/log.h>
#include <common/property_map.h>
#include <common/singleton.h>
#include <common/strlib.h>

#include <syslib/application.h>

#include <push_notifications/push_notifications_center.h>

namespace push_notifications
{

namespace ios_push_notifications
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Центр обработки пуш-сообщений
///////////////////////////////////////////////////////////////////////////////////////////////////
class PushNotificationsCenterImpl : public IPushNotificationsCenter
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////
    PushNotificationsCenterImpl  ();
    ~PushNotificationsCenterImpl ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Описание
///////////////////////////////////////////////////////////////////////////////////////////////////
    const char* Description ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Регистрация на пуш-сообщения
///////////////////////////////////////////////////////////////////////////////////////////////////
    void RegisterForNotifications   (const PushNotificationsCenter::RegisterCallback& callback, const common::PropertyMap& properties);
    void UnregisterForNotifications ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Подписка на пуш-сообщения
///////////////////////////////////////////////////////////////////////////////////////////////////
    xtl::connection RegisterNotificationsHandler (const PushNotificationsCenter::NotificationsHandler&);
};

}

}

#endif
