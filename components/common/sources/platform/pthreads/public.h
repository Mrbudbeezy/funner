#ifndef COMMLIB_PTHREADS_PUBLIC_HEADER
#define COMMLIB_PTHREADS_PUBLIC_HEADER

#include <platform/platform.h>

namespace common
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///Система управления потоками
///////////////////////////////////////////////////////////////////////////////////////////////////
class PThreadsSystem: public ICustomThreadSystem
{
  public:
///////////////////////////////////////////////////////////////////////////////////////////////////
///Конструктор / деструктор
///////////////////////////////////////////////////////////////////////////////////////////////////  
    PThreadsSystem  ();
    ~PThreadsSystem ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Создание / удаление нити
///////////////////////////////////////////////////////////////////////////////////////////////////
    thread_t CreateThread (IThreadCallback*);
    void     DeleteThread (thread_t);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Отмена нити
///////////////////////////////////////////////////////////////////////////////////////////////////    
    void CancelThread (thread_t);

///////////////////////////////////////////////////////////////////////////////////////////////////
///Ожидание завершения нити
///////////////////////////////////////////////////////////////////////////////////////////////////
    void JoinThread (thread_t);
    
///////////////////////////////////////////////////////////////////////////////////////////////////
///Получение текущей нити
///////////////////////////////////////////////////////////////////////////////////////////////////
//    const char* GetCurrentThreadName ();

///////////////////////////////////////////////////////////////////////////////////////////////////
///Работа с локальными данными нити
///////////////////////////////////////////////////////////////////////////////////////////////////
    tls_t CreateTls (IThreadCleanupCallback* cleanup);
    void  DeleteTls (tls_t tls);
    void  SetTls    (tls_t tls, void* data);
    void* GetTls    (tls_t tls);
};

}

#endif
